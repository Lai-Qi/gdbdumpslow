
# GDBDumpSlow

A Perl tool to parse and summarize **GoldenDB** CN slow query logs.

## Usage

```bash
perl gdbdumpslow.pl [OPTIONS] [LOGS...]
```
or
```bash
./gdbdumpslow.pl [OPTIONS] [LOGS...]
```

This tool helps analyze and summarize slow query logs generated by **GoldenDB CN**, with various sorting and filtering options.

## Options

| Option          | Description                                                                                           |
|-----------------|-------------------------------------------------------------------------------------------------------|
| `--verbose`     | Enable verbose output.                                                                                 |
| `--debug`       | Enable debug mode for troubleshooting.                                                                 |
| `--help`        | Display help information with usage details.                                                           |
| `-v`            | Enable verbose output (same as `--verbose`).                                                           |
| `-d`            | Enable debug mode (same as `--debug`).                                                                 |
| `-s ORDER`      | Sort results by the specified order (default: `at`). Available options are:                             |
|                 | - `at`: Average query time                                                                      |
|                 | - `ap`: Average ParserSQLTime                                                                          |
|                 | - `ag`: Average GetGTIDTime                                                                            |
|                 | - `af`: Average FreeGtidTime                                                                           |
|                 | - `c`: Count of queries                                                                                |
|                 | - `t`: Total query time                                                                                |
|                 | - `p`: Total Parse SQL time                                                                            |
|                 | - `g`: Total GetGTIDTime                                                                               |
|                 | - `f`: Total FreeGtidTime                                                                              |
| `-r`            | Reverse the sort order (e.g., display the largest last instead of first).                              |
| `-t NUM`        | Display only the top NUM queries based on the sort order.                                               |
| `-a`            | Do not abstract numbers to `N` and strings to `S`.                                                      |
| `-n NUM`        | Abstract numbers only when they have at least NUM digits within names.                                  |
| `-g PATTERN`    | Only show SQL statements that match the specified PATTERN.                                              |

## Example

```bash
perl gdbdumpslow.pl  slow_query.log
```

This command will display the sql information sorted by average query time from the provided slow query log file.

```bash
perl gdbdumpslow.pl  -g 'from t1'  slow_query.log
```

This command will display the sql information which contains pattern 'from t1' from the provided slow query log file.

